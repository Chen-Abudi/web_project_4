!function(){"use strict";const t={formSelector:".popup__form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_visible"},e=document.querySelector(".popup__form_type_profile"),s=document.querySelector(".profile"),r=(s.querySelector(".profile__name"),s.querySelector(".profile__description"),s.querySelector(".profile__edit-button")),o=s.querySelector(".profile__add-button"),i=document.querySelector(".form"),n=i.querySelector(".form__input_type_profile-name"),a=i.querySelector(".form__input_type_profile-title"),u=document.querySelector(".popup__form_type_add-postcard"),l=(document.querySelector(".popup_type_add-postcard"),document.querySelector(".popup_type_image-ex"),document.querySelector(".postcards").querySelector(".postcards__list"),document.querySelector(".profile__image-overlay")),c=document.querySelector(".popup__form_type_avatar-update");class _{constructor(t,e,s,r){let{handleCardClick:o,handleRemoveCard:i,handleLikeCard:n}=s;this._name=t.name,this._link=t.link,this._userId=r,this._cardId=t._id,this._ownerId=t.owner._id,this._likes=t.likes,this._handleCardClick=o,this._handleRemoveCard=i,this._handleLikeCard=n,this._templatePostcardSelector=e}_getTemplate(){return document.querySelector(this._templatePostcardSelector).content.querySelector(".postcard").cloneNode(!0)}_cardAttributes(){this._title=this._postcardListItem.querySelector(".postcard__title"),this._img=this._postcardListItem.querySelector(".postcard__image"),this._likeButton=this._postcardListItem.querySelector(".postcard__like-button"),this._likeButtonCounter=this._postcardListItem.querySelector(".postcard__like-counter"),this._removeButton=this._postcardListItem.querySelector(".postcard__remove-button")}_toggleLikeState(){this._handleLikeCard(this._cardId,this._likes.some((t=>t._id===this._userId))).then((t=>{this._likeButton.classList.toggle("postcard__like-button_active"),this._likes=t.likes,this._likeButtonCounter.textContent=this._likes.length})).catch((t=>console.log(t)))}_getLikesQuantity(){this._likeButtonCounter.textContent=this._likes.length}setRemoveCard(){this._postcardListItem.remove(),this._postcardListItem=null}_setUserLikes(){this._likes.some((t=>t._id===this._userId))&&this._likeButton.classList.add("postcard__like-button_active")}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._toggleLikeState())),this._removeButton.addEventListener("click",(()=>{this._handleRemoveCard({id:this._cardId})})),this._img.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}generateCard(){return this._postcardListItem=this._getTemplate(),this._cardAttributes(),this._setUserLikes(),this._getLikesQuantity(),this._title.textContent=this._name,this._img.src=this._link,this._img.alt="A colorful and magnificent view of ".concat(this._name),this._ownerId!==this._userId&&(this._removeButton.style.display="none"),this._setEventListeners(),this._postcardListItem}}function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const h="popup_receptive";var p=class{constructor(t){d(this,"_handleEscClose",(t=>{"Escape"===t.key&&this.close()})),d(this,"_handleOverlayClose",(t=>{t.target.classList.contains("popup")&&this.close()})),this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".popup__close-button"),this._setEventListeners()}open(){this._popup.classList.add(h),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popup.classList.remove(h),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}_setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}};class m extends p{constructor(t){let{popupSelector:e,handleFormSubmit:s}=t;super(e),this._handleFormSubmit=s,this._form=this._popup.querySelector(".popup__form"),this._inputList=[...this._form.querySelectorAll(".form__input")],this._submitButton=this._form.querySelector(".form__button"),this._submitButtonText=this._submitButton.textContent,this._setEventListenersSubmit()}close(){super.close(),this._form.reset()}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}renderLoadingStatus(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=t?e:this._submitButtonText}_setEventListenersSubmit(){this._form.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}function b(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var v=class{constructor(t,e){b(this,"_toggleButton",(()=>{this._hasValidInput()?this._disableSubmitButton():this._enableSubmitButton()})),b(this,"_setEventListeners",(()=>{const{inputSelector:t}=this._config;this._inputList=[...this._form.querySelectorAll(t)],this._toggleButton(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t,this._config),this._toggleButton()}))}))})),this._config=t,this._form=e,this._button=this._form.querySelector(this._config.submitButtonSelector)}_showInputError(t){const{inputErrorClass:e,errorClass:s}=this._config,r=t.validationMessage,o=this._form.querySelector(".".concat(t.id,"-error"));t.classList.add(e),o.textContent=r,o.classList.add(s)}_hideInputError(t){const{inputErrorClass:e,errorClass:s}=this._config,r=this._form.querySelector(".".concat(t.id,"-error"));t.classList.remove(e),r.textContent="",r.classList.remove(s)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasValidInput(){return this._inputList.some((t=>!t.validity.valid))}_enableSubmitButton(){const{inactiveButtonClass:t}=this._config;this._button.disabled=!1,this._button.classList.remove(t)}_disableSubmitButton(){const{inactiveButtonClass:t}=this._config;this._button.disabled=!0,this._button.classList.add(t)}resetValidation(){this._inputList.forEach((t=>{this._hideInputError(t)})),this._toggleButton()}enableValidation(){this._form.addEventListener("reset",(t=>{this._toggleButton()})),this._setEventListeners()}};const S=new v(t,e),f=new v(t,u),g=new v(t,c);S.enableValidation(),f.enableValidation(),g.enableValidation();const y=new class{constructor(t,e){this._baseUrl=t,this._headers=e}_returnRes(t){return t.ok?t.json():Promise.reject("An error just occurred: ".concat(t.status))}getInitialcards(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((t=>this._returnRes(t)))}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((t=>this._returnRes(t)))}setUserInfo(t){let{name:e,about:s}=t;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:s})}).then((t=>this._returnRes(t)))}setUserAvatar(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((t=>this._returnRes(t)))}addCard(t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(t)}).then((t=>this._returnRes(t)))}removeCard(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((t=>this._returnRes(t)))}cardLike(t,e){let s;return s=e?"DELETE":"PUT",fetch("".concat(this._baseUrl,"/cards/likes/").concat(t),{method:s,headers:this._headers}).then((t=>this._returnRes(t)))}}("https://around.nomoreparties.co/v1/cohort-3-en",{authorization:"7206ed33-5b05-44a8-9280-ab5ebd7021d1","Content-Type":"application/json"}),L=new class{constructor(t){let{userNameSelector:e,userJobSelector:s,userAvatarSelector:r}=t;this._userNameElement=document.querySelector(e),this._userJobElement=document.querySelector(s),this._userAvatarElement=document.querySelector(r)}getUserInfo(){return{userName:this._userNameElement.textContent,userJob:this._userJobElement.textContent}}getUserId(){return this._userId}setUserId(t){this._userId=t}setUserAvatar(t){this._userAvatarElement.src=t}setUserInfo(t,e){this._userNameElement.textContent=t,this._userJobElement.textContent=e}}({userNameSelector:".profile__name",userJobSelector:".profile__description",userAvatarSelector:".profile__image"}),C=new class{constructor(t,e){let{renderer:s}=t;this._renderer=s,this._container=document.querySelector(e)}render(t){t.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}setItem(t){this._container.append(t)}}({renderer:function(t){const e=E(t);C.setItem(e)}},".postcards__list");function E(t){const e=new _(t,"#postcard-template",{handleCardClick:()=>{q.open(t.link,t.name)},handleRemoveCard:t=>{let{id:s}=t;B.open(),B.setSubmitAction((()=>{y.removeCard(s).then((t=>{console.log("postcard is removed",t),e.setRemoveCard()})).then((()=>{console.log("postcard was removed by the server"),B.close()})).catch((t=>console.log(t)))}))},handleLikeCard:(t,e)=>y.cardLike(t,e)},L.getUserId());return e.generateCard()}Promise.all([y.getUserInfo(),y.getInitialcards()]).then((t=>{let[e,s]=t;L.setUserInfo(e.name,e.about),L.setUserAvatar(e.avatar),L.setUserId(e._id),C.render(s)})).catch((t=>console.log(t)));const k=new m({popupSelector:".popup_type_add-postcard",handleFormSubmit:t=>{k.renderLoadingStatus(!0,"Creating..."),y.addCard(t).then((t=>{const e=E(t);C.addItem(e),k.close()})).catch((t=>console.log(t))).finally((()=>k.renderLoadingStatus(!1)))}}),I=new m({popupSelector:".popup_type_edit-profile",handleFormSubmit:t=>{I.renderLoadingStatus(!0,"Saving..."),y.setUserInfo({name:t.username,about:t.userjob}).then((t=>{L.setUserInfo(t.name,t.about),I.close()})).catch((t=>console.log(t))).finally((()=>I.renderLoadingStatus(!1)))}}),q=new class extends p{constructor(t){super(t),this._popupImage=this._popup.querySelector(".popup__image"),this._popupCaption=this._popup.querySelector(".popup__caption")}open(t,e){this._popupImage.src=t,this._popupImage.alt="A colorful and magnificent view of ".concat(e),this._popupCaption.textContent=e,super.open()}}(".popup_type_image-ex"),B=new class extends p{constructor(t){let{popupSelector:e,handleFormSubmit:s}=t;super(e),this._handleFormSubmit=s,this._submitButton=document.querySelector(".form__button_type_remove-postcard"),this._submitButtonText=this._submitButton.textContent,this._setEventListenersSubmit()}close(){super.close(),this._renderLoadingStatus(!1)}setSubmitAction(t){this._handleFormSubmit=t}_renderLoadingStatus(t){this._submitButton.textContent=t?"Removing...":this._submitButtonText}_setEventListenersSubmit(){this._popup.addEventListener("submit",(t=>{t.preventDefault(),this._renderLoadingStatus(!0),this._handleFormSubmit()}))}}({popupSelector:".popup_type_remove-postcard"}),U=new m({popupSelector:".popup_type_avatar-update",handleFormSubmit:t=>{U.renderLoadingStatus(!0,"Updating..."),y.setUserAvatar(t.link).then((t=>{U.close(),L.setUserAvatar(t.avatar)})).catch((t=>console.log(t))).finally((()=>U.renderLoadingStatus(!1)))}});r.addEventListener("click",(()=>{const{userName:t,userJob:e}=L.getUserInfo();n.value=t,a.value=e,S.resetValidation(),I.open()})),o.addEventListener("click",(()=>{k.open(),f.resetValidation()})),l.addEventListener("click",(()=>{U.open(),g.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NkQsRUFDdEIxSixFQUFlNkYsTUFBUThELEVBRXZCdkMsRUFBcUJGLGtCQUNyQnNFLEVBQWlCL0csVUFHbkI1RSxFQUFrQjRELGlCQUFpQixTQUFTLEtBQzFDNEgsRUFBWTVHLE9BQ1o2QyxFQUFzQkoscUJBS3hCaEgsRUFBT3VELGlCQUFpQixTQUFTLEtBQy9Cb0ksRUFBa0JwSCxPQUNsQjhDLEVBQW9CTCxxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBSZW1vdmVJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICAgLS0tLS0tLSBUaGlzIE9iamVjdCBDb250YWlucyB0aGUgTmVjZXNzYXJ5IEVsZW1lbnRzOiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cclxuY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLy8gUHJvZmlsZSBhbmQgSXRzIEVsZW1lbnRzOlxyXG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdHlwZV9wcm9maWxlXCIpO1xyXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLy8gVGhlIFByb2ZpbGUgQnV0dG9uczpcclxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZFBvc3RjYXJkQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLy8gRm9ybSBhbmQgSXRzIENvbXBvbmVudHM6XHJcbmNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5jb25zdCBpbnB1dENhcmROYW1lID0gY2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX3Byb2ZpbGUtbmFtZVwiKTtcclxuY29uc3QgaW5wdXRDYXJkVGl0bGUgPSBjYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2lucHV0X3R5cGVfcHJvZmlsZS10aXRsZVwiXHJcbik7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuY29uc3QgcG9zdGNhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2FkZC1wb3N0Y2FyZFwiKTtcclxuXHJcbmNvbnN0IGFkZFBvc3RjYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkLXBvc3RjYXJkXCIpO1xyXG5jb25zdCBpbWFnZUV4TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfaW1hZ2UtZXhcIik7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLy8gUG9zdGNhcmRzIGFuZCBUaGVpciBFbGVtZW50OlxyXG5jb25zdCBwb3N0Y2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RjYXJkc1wiKTtcclxuY29uc3QgcG9zdGNhcmRzTGlzdCA9IHBvc3RjYXJkcy5xdWVyeVNlbGVjdG9yKFwiLnBvc3RjYXJkc19fbGlzdFwiKTtcclxuY29uc3QgdGVtcGxhdGVQb3N0Y2FyZFNlbGVjdG9yID0gXCIjcG9zdGNhcmQtdGVtcGxhdGVcIjtcclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbi8vIEF2YXRhclxyXG5jb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLW92ZXJsYXlcIik7XHJcbmNvbnN0IHVwZGF0ZUF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19mb3JtX3R5cGVfYXZhdGFyLXVwZGF0ZVwiXHJcbik7XHJcblxyXG4vLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuLy8gQ29ubmVjdGluZyB0byBQcmFjdGljdW0ncyBBcGlcclxuY29uc3QgYmFzZVVybCA9IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lblwiO1xyXG5jb25zdCBoZWFkZXJzID0ge1xyXG4gIGF1dGhvcml6YXRpb246IFwiNzIwNmVkMzMtNWIwNS00NGE4LTkyODAtYWI1ZWJkNzAyMWQxXCIsXHJcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbn07XHJcblxyXG4vLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmV4cG9ydCB7XHJcbiAgY29uZmlnLFxyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIHByb2ZpbGUsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxyXG4gIGFkZFBvc3RjYXJkQnV0dG9uLFxyXG4gIGlucHV0Q2FyZE5hbWUsXHJcbiAgaW5wdXRDYXJkVGl0bGUsXHJcbiAgcG9zdGNhcmRGb3JtLFxyXG4gIGFkZFBvc3RjYXJkTW9kYWwsXHJcbiAgaW1hZ2VFeE1vZGFsLFxyXG4gIHBvc3RjYXJkc0xpc3QsXHJcbiAgdGVtcGxhdGVQb3N0Y2FyZFNlbGVjdG9yLFxyXG4gIGF2YXRhcixcclxuICB1cGRhdGVBdmF0YXJGb3JtLFxyXG4gIGJhc2VVcmwsXHJcbiAgaGVhZGVycyxcclxufTtcclxuIiwiaW1wb3J0IHsgdGVtcGxhdGVQb3N0Y2FyZFNlbGVjdG9yIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5cclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBvc3RjYXJkIENsYXNzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICB0ZW1wbGF0ZVBvc3RjYXJkU2VsZWN0b3IsXHJcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlUmVtb3ZlQ2FyZCwgaGFuZGxlTGlrZUNhcmQgfSxcclxuICAgIHVzZXJJZFxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQgPSBoYW5kbGVSZW1vdmVDYXJkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcclxuICAgIHRoaXMuX3RlbXBsYXRlUG9zdGNhcmRTZWxlY3RvciA9IHRlbXBsYXRlUG9zdGNhcmRTZWxlY3RvcjtcclxuICB9XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBNYXJrdXAgVGVtcGxhdGUg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgcG9zdGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVQb3N0Y2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RjYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIHBvc3RjYXJkRWxlbWVudDtcclxuICB9XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4gIC8vIFBvc3RjYXJkIGFuZCBpdHMgYXR0cmlidXRlc1xyXG4gIF9jYXJkQXR0cmlidXRlcygpIHtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9zdGNhcmRMaXN0SXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBvc3RjYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2ltZyA9IHRoaXMuX3Bvc3RjYXJkTGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wb3N0Y2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fcG9zdGNhcmRMaXN0SXRlbS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3N0Y2FyZF9fbGlrZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b25Db3VudGVyID0gdGhpcy5fcG9zdGNhcmRMaXN0SXRlbS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3N0Y2FyZF9fbGlrZS1jb3VudGVyXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9yZW1vdmVCdXR0b24gPSB0aGlzLl9wb3N0Y2FyZExpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvc3RjYXJkX19yZW1vdmUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICAvLyBNb2RpZnkgdGhlIExpa2UgQnV0dG9uIGFjdGl2aXR5XHJcbiAgX3RvZ2dsZUxpa2VTdGF0ZSgpIHtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKFxyXG4gICAgICB0aGlzLl9jYXJkSWQsXHJcbiAgICAgIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpXHJcbiAgICApXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJwb3N0Y2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gcmVzLmxpa2VzO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b25Db3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICAvLyBTaG93cyB0aGUgTGlrZXMgUXVhbnRpdHlcclxuICBfZ2V0TGlrZXNRdWFudGl0eSgpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b25Db3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBvc3RjYXJkIFJlbW92ZSBCdXR0b24gRnVuY3Rpb24g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgLy8gX2hhbmRsZVJlbW92ZUJ1dHRvbiA9ICgpID0+IHtcclxuICAvLyAgIHRoaXMuX3Bvc3RjYXJkTGlzdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgLy8gICB0aGlzLl9wb3N0Y2FyZExpc3RJdGVtID0gbnVsbDtcclxuICAvLyB9O1xyXG5cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgUG9zdGNhcmQgUmVtb3ZlIEJ1dHRvbiBGdW5jdGlvbiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICBzZXRSZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fcG9zdGNhcmRMaXN0SXRlbS5yZW1vdmUoKTtcclxuICAgIHRoaXMuX3Bvc3RjYXJkTGlzdEl0ZW0gPSBudWxsO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBvc3RjYXJkIExpa2UgQnV0dG9uIEZ1bmN0aW9uIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIC8vIF9oYW5kbGVMaWtlQnV0dG9uID0gKGV2dCkgPT4ge1xyXG4gIC8vICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwicG9zdGNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAvLyB9O1xyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICBfc2V0VXNlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcInBvc3RjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgRXZlbnQgTGlzdGVuZXJzIGZvciB0aGUgTmVjZXNzYXJ5IGZ1bmN0aW9ucyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl90b2dnbGVMaWtlU3RhdGUoKSk7XHJcblxyXG4gICAgLy8gdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7XHJcbiAgICAvLyB0aGlzLl9yZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVJlbW92ZUJ1dHRvbik7XHJcblxyXG4gICAgdGhpcy5fcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQoe1xyXG4gICAgICAgIGlkOiB0aGlzLl9jYXJkSWQsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5faW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgICAgLS0tLS0tLS0tIEZ1bmN0aW9uIEZvciBQb3N0Y2FyZHMgUG9wdWxhdGVkIHdpdGggRGF0YTogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX3Bvc3RjYXJkTGlzdEl0ZW0gPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEF0dHJpYnV0ZXMoKTtcclxuICAgIHRoaXMuX3NldFVzZXJMaWtlcygpO1xyXG4gICAgdGhpcy5fZ2V0TGlrZXNRdWFudGl0eSgpO1xyXG5cclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2ltZy5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1nLmFsdCA9IGBBIGNvbG9yZnVsIGFuZCBtYWduaWZpY2VudCB2aWV3IG9mICR7dGhpcy5fbmFtZX1gO1xyXG5cclxuICAgIHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCAmJlxyXG4gICAgICAodGhpcy5fcmVtb3ZlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIik7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fcG9zdGNhcmRMaXN0SXRlbTtcclxuICB9XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbn1cclxuIiwiY29uc3QgcG9wdXBJc09wZW5lZENsYXNzID0gXCJwb3B1cF9yZWNlcHRpdmVcIjtcclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBvcHVwIENsYXNzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5jbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBPUFVQIFdpbmRvd3MgQ2xvc2luZyBieSBFc2MgS2V5IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgICAtLS0tLS0tLS0tLS0tLS0tLSBQT1BVUCBXaW5kb3dzIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAtLS0tLS0tLS0tLS0tLS0tLS0gRXNjIENsb3NlIEV2ZW50IExpc3RlbmVyczogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHBvcHVwSXNPcGVuZWRDbGFzcyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUocG9wdXBJc09wZW5lZENsYXNzKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICB9XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBDbG9zaW5nIFBvcHVwIEV2ZW50IExpc3RlbmVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBvcHVwIFdpdGggRm9ybSBDbGFzcyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyc1N1Ym1pdCgpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSAIFJlc2V0cyBGb3JtIG9uY2UgdGhlIFBvcHVwIGlzIENsb3NlZCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICAvLyDilIDilIDilIDilIDilIDilIAgQ29sbGVjdHMgREFUQSBmcm9tIElucHV0IEZpZWxkcyBhbmQgUmV0dXJucyBpdCBhcyBhbiBPYmplY3Qg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICByZW5kZXJMb2FkaW5nU3RhdHVzKGlzSXRMb2FkaW5nLCBsb2FkVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0l0TG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiDilIDilIDilIDilIDilIAgTW9kaWZpZXMgaXRzIFBhcmVudCB3aXRoIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gICAgIOKUgOKUgOKUgOKUgOKUgCBGb3JtIEV2ZW50IEhhbmRsZXIgYW5kIENsb3NlIGljb24gRXZlbnQgTGlzdGVuZXIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzU3VibWl0KCkge1xyXG4gICAgLy8gc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxufVxyXG4iLCIvKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEZPUk0gVkFMSURBVElPTiBDbGFzczogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cclxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuXHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIOKUgOKUgOKUgOKUgCBESVNQTEFZSU5HIHRoZSBFUlJPUiBNRVNTQUdFIEZvciB0aGUgTmVjZXNzYXJ5IElOUFVUUzog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fY29uZmlnO1xyXG4gICAgY29uc3QgZXJyb3JNc2cgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1zZztcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSAIENPTkNFQUxJTkcgdGhlIEVSUk9SIE1FU1NBR0UgRm9yIHRoZSBOZWNlc3NhcnkgSU5QVVRTOuKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX2NvbmZpZztcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgQ0hFQ0tJTkcgSWYgdGhlIEZvcm0gSXMgVkFMSUQ6IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSAIENIRUNLSU5HIElmIEF0IExlYXN0IE9ORSBJbnB1dCBJcyBWQUxJRDog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgX2hhc1ZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBET01JTkFUSU5HIHRoZSBCdXR0b24gQUNUSVZJVFk6IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX2NvbmZpZztcclxuICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fY29uZmlnO1xyXG4gICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIE1PRElGWSB0aGUgQnV0dG9uIEFjdGl2aXR5OiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICBfdG9nZ2xlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgLy8gdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4gIC8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gICAgIC0tLS0tLS0tLS0gU2V0dGluZyBFVkVOVCBMSVNURU5FUlMgRm9yIHRoZSBOZWNlc3NhcnkgSU5QVVRTOiAtLS0tLS0tLS0tLS0tLS1cclxuICAgICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGlucHV0U2VsZWN0b3IgfSA9IHRoaXMuX2NvbmZpZztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcildO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCB0aGlzLl9jb25maWcpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBBZnRlciBTdWJtaXR0aW5nLCB0aGUgRk9STSBWQUxJREFUSU9OIFJFU0VUUzog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgRW5hYmxlcyBGb3JtIFZhbGlkYXRpb246IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7IC8vIGltcG9ydCBvZiB0aGUgbWFpbiBzdHlsZXNoZWV0cyBmaWxlXHJcblxyXG5pbXBvcnQge1xyXG4gIGNvbmZpZyxcclxuICBwcm9maWxlRm9ybSxcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBhZGRQb3N0Y2FyZEJ1dHRvbixcclxuICBpbnB1dENhcmROYW1lLFxyXG4gIGlucHV0Q2FyZFRpdGxlLFxyXG4gIHBvc3RjYXJkRm9ybSxcclxuICB0ZW1wbGF0ZVBvc3RjYXJkU2VsZWN0b3IsXHJcbiAgYXZhdGFyLFxyXG4gIHVwZGF0ZUF2YXRhckZvcm0sXHJcbiAgYmFzZVVybCxcclxuICBoZWFkZXJzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwUmVtb3ZlSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBSZW1vdmVJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcblxyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuaW1wb3J0IGFsbFBvc3RjYXJkcyBmcm9tIFwiLi4vdXRpbHMvYWxsUG9zdGNhcmRzLmpzXCI7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUZvcm0pO1xyXG5jb25zdCBwb3N0Y2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHBvc3RjYXJkRm9ybSk7XHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHVwZGF0ZUF2YXRhckZvcm0pO1xyXG5cclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5wb3N0Y2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGJhc2VVcmwsIGhlYWRlcnMpO1xyXG5cclxuLy8gQW4gSW5zdGFudCBvZiBVc2VyIEluZm9cclxuY29uc3QgbmV3VXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHVzZXJKb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICB1c2VyQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuLy8gYXBpLmdldFVzZXJJbmZvKCkudGhlbigocmVzKSA9PiB7XHJcbi8vICAgbmV3VXNlci5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcclxuLy8gICBuZXdVc2VyLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbi8vICAgbmV3VXNlci5zZXRVc2VySWQocmVzLl9pZCk7XHJcbi8vIH0pO1xyXG5cclxuLy8gYXBpLmdldEluaXRpYWxjYXJkcygpLnRoZW4oKCkgPT4ge1xyXG4vLyAgIGNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbi8vICAgICB7XHJcbi8vICAgICAgIC8vIGRhdGE6IHJlcyxcclxuLy8gICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbi8vICAgICAgICAgY29uc3QgcG9zdGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG4vLyAgICAgICAgIGNhcmRMaXN0LnNldEl0ZW0ocG9zdGNhcmQpO1xyXG4vLyAgICAgICB9LFxyXG4vLyAgICAgfSxcclxuLy8gICAgIFwiLnBvc3RjYXJkc19fbGlzdFwiXHJcbi8vICAgKTtcclxuLy8gICBjYXJkTGlzdC5yZW5kZXIoKTtcclxuLy8gfSk7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIC8vIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgLy8gICBjb25zdCBwb3N0Y2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSk7XHJcbiAgICAvLyAgIGNhcmRMaXN0LnNldEl0ZW0ocG9zdGNhcmQpO1xyXG4gICAgLy8gfSxcclxuICAgIHJlbmRlcmVyOiByZWNpdGVDYXJkLFxyXG4gIH0sXHJcbiAgXCIucG9zdGNhcmRzX19saXN0XCJcclxuKTtcclxuLy8gY2FyZExpc3QucmVuZGVyKCk7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgIC0tLS0tLSBJdCB0YWtlcyBhbiBpdGVyYWJsZSBvZiBQcm9taXNlcyBhcyBhbiBpbnB1dCwgYW5kIHJldHVybnMgYSAtLS0tLS0tLS1cclxuICAgLSBzaW5nbGUgUHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiB0aGUgaW5wdXQgUHJvbWlzZXMgcmVzdWx0IC0tLVxyXG4gICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbGNhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzRGF0YV0pID0+IHtcclxuICAgIG5ld1VzZXIuc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xyXG4gICAgbmV3VXNlci5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICBuZXdVc2VyLnNldFVzZXJJZCh1c2VyRGF0YS5faWQpO1xyXG4gICAgY2FyZExpc3QucmVuZGVyKGNhcmRzRGF0YSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLy8g4pSA4pSA4pSA4pSA4pSAIEdlbmVyYXRlIENhcmQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICB0ZW1wbGF0ZVBvc3RjYXJkU2VsZWN0b3IsXHJcbiAgICB7XHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgIGltYWdlUG9wdXAub3BlbihkYXRhLmxpbmssIGRhdGEubmFtZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZVJlbW92ZUNhcmQ6ICh7IGlkIH0pID0+IHtcclxuICAgICAgICByZW1vdmVJbWFnZVBvcHVwLm9wZW4oKTtcclxuXHJcbiAgICAgICAgcmVtb3ZlSW1hZ2VQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5yZW1vdmVDYXJkKGlkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJwb3N0Y2FyZCBpcyByZW1vdmVkXCIsIHJlcyk7XHJcbiAgICAgICAgICAgICAgY2FyZC5zZXRSZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInBvc3RjYXJkIHdhcyByZW1vdmVkIGJ5IHRoZSBzZXJ2ZXJcIik7XHJcbiAgICAgICAgICAgICAgcmVtb3ZlSW1hZ2VQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUxpa2VDYXJkOiAoY2FyZElkLCBpc0l0TGlrZWQpID0+IGFwaS5jYXJkTGlrZShjYXJkSWQsIGlzSXRMaWtlZCksXHJcblxyXG4gICAgICAvLyBoYW5kbGVMaWtlQ2FyZDogKCkgPT4ge30sXHJcbiAgICB9LFxyXG4gICAgbmV3VXNlci5nZXRVc2VySWQoKVxyXG4gICk7XHJcbiAgLy8gY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG5cclxuICAvLyByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4vLyBSZWNpdGluZyB0aGUgUG9zdGNhcmQgb24gdGhlIFBhZ2VcclxuZnVuY3Rpb24gcmVjaXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgcG9zdGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gIGNhcmRMaXN0LnNldEl0ZW0ocG9zdGNhcmQpO1xyXG59XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSAIEFkZCBQb3N0Y2FyZCBNb2RhbCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuY29uc3QgYWRkUG9zdGNhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZV9hZGQtcG9zdGNhcmRcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgYWRkUG9zdGNhcmQucmVuZGVyTG9hZGluZ1N0YXR1cyh0cnVlLCBcIkNyZWF0aW5nLi4uXCIpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRDYXJkKGRhdGEpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3UG9zdGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3UG9zdGNhcmQpO1xyXG4gICAgICAgIGFkZFBvc3RjYXJkLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiBhZGRQb3N0Y2FyZC5yZW5kZXJMb2FkaW5nU3RhdHVzKGZhbHNlKSk7XHJcbiAgfSxcclxufSk7XHJcbi8vIGFkZFBvc3RjYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLy8g4pSA4pSA4pSA4pSA4pSAIEVkaXQgUHJvZmlsZSBNb2RhbCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICBlZGl0UHJvZmlsZU1vZGFsLnJlbmRlckxvYWRpbmdTdGF0dXModHJ1ZSwgXCJTYXZpbmcuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLnNldFVzZXJJbmZvKHsgbmFtZTogZGF0YS51c2VybmFtZSwgYWJvdXQ6IGRhdGEudXNlcmpvYiB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIG5ld1VzZXIuc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0KTtcclxuICAgICAgICBlZGl0UHJvZmlsZU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiBlZGl0UHJvZmlsZU1vZGFsLnJlbmRlckxvYWRpbmdTdGF0dXMoZmFsc2UpKTtcclxuICB9LFxyXG59KTtcclxuLy8gZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZS1leFwiKTtcclxuLy8gaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcmVtb3ZlSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFJlbW92ZUltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlX3JlbW92ZS1wb3N0Y2FyZFwiLFxyXG4gIC8vIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHt9LFxyXG59KTtcclxuLy8gcmVtb3ZlSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmNvbnN0IHVwZGF0ZUF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwX3R5cGVfYXZhdGFyLXVwZGF0ZVwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICB1cGRhdGVBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nU3RhdHVzKHRydWUsIFwiVXBkYXRpbmcuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLnNldFVzZXJBdmF0YXIoZGF0YS5saW5rKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgdXBkYXRlQXZhdGFyUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBuZXdVc2VyLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB1cGRhdGVBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nU3RhdHVzKGZhbHNlKSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyB1cGRhdGVBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0gQWRkaW5nIHRoZSBOZWNlc3NhcnkgRXZlbnQgTGlzdGVuZXJzOiAtLS0tLS0tLS0tLS0tLS0tLS1cclxuICAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyB1c2VyTmFtZSwgdXNlckpvYiB9ID0gbmV3VXNlci5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0Q2FyZE5hbWUudmFsdWUgPSB1c2VyTmFtZTtcclxuICBpbnB1dENhcmRUaXRsZS52YWx1ZSA9IHVzZXJKb2I7XHJcblxyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRQcm9maWxlTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZFBvc3RjYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkUG9zdGNhcmQub3BlbigpO1xyXG4gIHBvc3RjYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuXHJcbiAgLy8gcG9zdGNhcmRGb3JtLnJlc2V0KCk7XHJcbn0pO1xyXG5cclxuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdXBkYXRlQXZhdGFyUG9wdXAub3BlbigpO1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG4vLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBoZWFkZXJzKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX3JldHVyblJlcyhyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIC8vIGNvbnN0IGpzb24gPSByZXMuanNvbigpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhqc29uKTtcclxuICAgICAgLy8gcmV0dXJuIGpzb247XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEFuIGVycm9yIGp1c3Qgb2NjdXJyZWQ6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxjYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNhcmRMaWtlKGNhcmRJZCwgaXNJdExpa2VkKSB7XHJcbiAgICBsZXQgbWV0aG9kO1xyXG4gICAgaXNJdExpa2VkID8gKG1ldGhvZCA9IFwiREVMRVRFXCIpIDogKG1ldGhvZCA9IFwiUFVUXCIpO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblJlcyhyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBVc2VyIEluZm8gQ2xhc3Mg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VySm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSAIFJldHVybnMgYW4gT2JqZWN0IHdpdGggVXNlciBJbmZvIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgdXNlckpvYjogdGhpcy5fdXNlckpvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJZCh1c2VySWQpIHtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICB9XHJcblxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSAIEFkZGluZyBOZXcgVXNlciBEYXRhIHRvIFBhZ2Ug4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgc2V0VXNlckluZm8odXNlcm5hbWUsIHVzZXJqb2IpIHtcclxuICAgIC8vIGNvbnN0IHsgdXNlcm5hbWUsIHVzZXJqb2IgfSA9IGRhdGE7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VybmFtZTtcclxuICAgIHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50ID0gdXNlcmpvYjtcclxuICB9XHJcbn1cclxuIiwiLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFNlY3Rpb24gQ2xhc3Mg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIC8vIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFJlY2l0ZSBFYWNoIEVsZW1lbnQgb24gUGFnZSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICByZW5kZXIoZGF0YSkge1xyXG4gICAgZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuICAvLyDilIDilIDilIDilIDilIAgQWRkaW5nIERPTSBlbGVtZW50IHRvIENvbnRhaW5lciDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBQb3B1cCBJbWFnZSBDbGFzcyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBvcHVwIEltYWdlIERhdGEg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgb3BlbihsaW5rLCBuYW1lKSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBBIGNvbG9yZnVsIGFuZCBtYWduaWZpY2VudCB2aWV3IG9mICR7bmFtZX1gO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG4vLyDilIDilIDilIDilIDilIDilIAgUG9wdXAgRm9yIFJlbW92ZSBQb3N0Y2FyZCBDbGFzc3Mg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwUmVtb3ZlSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5mb3JtX19idXR0b25fdHlwZV9yZW1vdmUtcG9zdGNhcmRcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyc1N1Ym1pdCgpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcmVuZGVyTG9hZGluZ1N0YXR1cyhmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxvYWRpbmdTdGF0dXMoaXNJdExvYWRpbmcpIHtcclxuICAgIGlmIChpc0l0TG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlJlbW92aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzU3VibWl0KCkge1xyXG4gICAgLy8gc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fcmVuZGVyTG9hZGluZ1N0YXR1cyh0cnVlKTtcclxuXHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRm9ybSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGUiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZFBvc3RjYXJkQnV0dG9uIiwiY2FyZEZvcm0iLCJpbnB1dENhcmROYW1lIiwiaW5wdXRDYXJkVGl0bGUiLCJwb3N0Y2FyZEZvcm0iLCJhdmF0YXIiLCJ1cGRhdGVBdmF0YXJGb3JtIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInRlbXBsYXRlUG9zdGNhcmRTZWxlY3RvciIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVJlbW92ZUNhcmQiLCJoYW5kbGVMaWtlQ2FyZCIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfdXNlcklkIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlUmVtb3ZlQ2FyZCIsIl9oYW5kbGVMaWtlQ2FyZCIsIl90ZW1wbGF0ZVBvc3RjYXJkU2VsZWN0b3IiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRBdHRyaWJ1dGVzIiwiX3RpdGxlIiwiX3Bvc3RjYXJkTGlzdEl0ZW0iLCJfaW1nIiwiX2xpa2VCdXR0b24iLCJfbGlrZUJ1dHRvbkNvdW50ZXIiLCJfcmVtb3ZlQnV0dG9uIiwiX3RvZ2dsZUxpa2VTdGF0ZSIsInNvbWUiLCJsaWtlIiwidGhlbiIsInJlcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiX2dldExpa2VzUXVhbnRpdHkiLCJzZXRSZW1vdmVDYXJkIiwicmVtb3ZlIiwiX3NldFVzZXJMaWtlcyIsImFkZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpZCIsImdlbmVyYXRlQ2FyZCIsInNyYyIsImFsdCIsInN0eWxlIiwiZGlzcGxheSIsInBvcHVwSXNPcGVuZWRDbGFzcyIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVPdmVybGF5Q2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsIlBvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b25UZXh0IiwiX3NldEV2ZW50TGlzdGVuZXJzU3VibWl0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwicmVuZGVyTG9hZGluZ1N0YXR1cyIsImlzSXRMb2FkaW5nIiwibG9hZFRleHQiLCJwcmV2ZW50RGVmYXVsdCIsImZvcm0iLCJfaGFzVmFsaWRJbnB1dCIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9jb25maWciLCJfdG9nZ2xlQnV0dG9uIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9idXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVkIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsInBvc3RjYXJkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfcmV0dXJuUmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxjYXJkcyIsImZldGNoIiwibWV0aG9kIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRVc2VyQXZhdGFyIiwiYWRkQ2FyZCIsInJlbW92ZUNhcmQiLCJjYXJkSWQiLCJjYXJkTGlrZSIsImlzSXRMaWtlZCIsImF1dGhvcml6YXRpb24iLCJuZXdVc2VyIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJfdXNlckF2YXRhckVsZW1lbnQiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJnZXRVc2VySWQiLCJzZXRVc2VySWQiLCJ1c2VybmFtZSIsInVzZXJqb2IiLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVyIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInNldEl0ZW0iLCJhcHBlbmQiLCJwb3N0Y2FyZCIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiaW1hZ2VQb3B1cCIsInJlbW92ZUltYWdlUG9wdXAiLCJzZXRTdWJtaXRBY3Rpb24iLCJhbGwiLCJ1c2VyRGF0YSIsImNhcmRzRGF0YSIsImFkZFBvc3RjYXJkIiwibmV3UG9zdGNhcmQiLCJmaW5hbGx5IiwiZWRpdFByb2ZpbGVNb2RhbCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwQ2FwdGlvbiIsIl9yZW5kZXJMb2FkaW5nU3RhdHVzIiwiYWN0aW9uIiwidXBkYXRlQXZhdGFyUG9wdXAiXSwic291cmNlUm9vdCI6IiJ9